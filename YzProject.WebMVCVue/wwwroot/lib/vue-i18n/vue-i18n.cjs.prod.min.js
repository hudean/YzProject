"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var coreBase=require("@intlify/core-base"),vue=require("vue"),shared=require("@intlify/shared");const VERSION="9.2.2";let code=coreBase.CompileErrorCodes.__EXTEND_POINT__;const inc=()=>++code,I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSLALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSLALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e){return coreBase.createCompileError(e,null,void 0)}const TransrateVNodeSymbol=shared.makeSymbol("__transrateVNode"),DatetimePartsSymbol=shared.makeSymbol("__datetimeParts"),NumberPartsSymbol=shared.makeSymbol("__numberParts"),SetPluralRulesSymbol=shared.makeSymbol("__setPluralRules"),InejctWithOption=(shared.makeSymbol("__intlifyMeta"),shared.makeSymbol("__injectWithOption")),__VUE_I18N_BRIDGE__="__VUE_I18N_BRIDGE__";function handleFlatJson(e){if(!shared.isObject(e))return e;for(const s in e)if(shared.hasOwn(e,s))if(s.includes(".")){var r=s.split("."),t=r.length-1;let a=e;for(let e=0;e<t;e++)r[e]in a||(a[r[e]]={}),a=a[r[e]];a[r[t]]=e[s],delete e[s],shared.isObject(a[r[t]])&&handleFlatJson(a[r[t]])}else shared.isObject(e[s])&&handleFlatJson(e[s]);return e}function getLocaleMessages(e,a){const{messages:r,__i18n:t,messageResolver:s,flatJson:n}=a,l=shared.isPlainObject(r)?r:shared.isArray(t)?{}:{[e]:{}};if(shared.isArray(t)&&t.forEach(e=>{var a,r;"locale"in e&&"resource"in e?({locale:a,resource:r}=e,a?(l[a]=l[a]||{},deepCopy(r,l[a])):deepCopy(r,l)):shared.isString(e)&&deepCopy(JSON.parse(e),l)}),null==s&&n)for(const o in l)shared.hasOwn(l,o)&&handleFlatJson(l[o]);return l}const isNotObjectOrIsArray=e=>!shared.isObject(e)||shared.isArray(e);function deepCopy(e,a){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(a))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const r in e)shared.hasOwn(e,r)&&(isNotObjectOrIsArray(e[r])||isNotObjectOrIsArray(a[r])?a[r]=e[r]:deepCopy(e[r],a[r]))}function getComponentOptions(e){return e.type}function adjustI18nResources(a,r,e){let t=shared.isObject(r.messages)?r.messages:{};"__i18nGlobal"in e&&(t=getLocaleMessages(a.locale.value,{messages:t,__i18n:e.__i18nGlobal}));const s=Object.keys(t);if(s.length&&s.forEach(e=>{a.mergeLocaleMessage(e,t[e])}),shared.isObject(r.datetimeFormats)){const s=Object.keys(r.datetimeFormats);s.length&&s.forEach(e=>{a.mergeDateTimeFormat(e,r.datetimeFormats[e])})}if(shared.isObject(r.numberFormats)){const s=Object.keys(r.numberFormats);s.length&&s.forEach(e=>{a.mergeNumberFormat(e,r.numberFormats[e])})}}function createTextNode(e){return vue.createVNode(vue.Text,null,e,0)}let composerID=0;function defineCoreMissingHandler(s){return(e,a,r,t)=>s(a,r,vue.getCurrentInstance()||void 0,t)}function createComposer(r={},e){const o=r["__root"],t=void 0===o;let a=!shared.isBoolean(r.inheritLocale)||r.inheritLocale;const i=vue.ref(o&&a?o.locale.value:shared.isString(r.locale)?r.locale:coreBase.DEFAULT_LOCALE),c=vue.ref(o&&a?o.fallbackLocale.value:shared.isString(r.fallbackLocale)||shared.isArray(r.fallbackLocale)||shared.isPlainObject(r.fallbackLocale)||!1===r.fallbackLocale?r.fallbackLocale:i.value),u=vue.ref(getLocaleMessages(i.value,r)),m=vue.ref(shared.isPlainObject(r.datetimeFormats)?r.datetimeFormats:{[i.value]:{}}),g=vue.ref(shared.isPlainObject(r.numberFormats)?r.numberFormats:{[i.value]:{}});let s=o?o.missingWarn:!shared.isBoolean(r.missingWarn)&&!shared.isRegExp(r.missingWarn)||r.missingWarn,n=o?o.fallbackWarn:!shared.isBoolean(r.fallbackWarn)&&!shared.isRegExp(r.fallbackWarn)||r.fallbackWarn,d=o?o.fallbackRoot:!shared.isBoolean(r.fallbackRoot)||r.fallbackRoot,l=!!r.fallbackFormat,v=shared.isFunction(r.missing)?r.missing:null,p=shared.isFunction(r.missing)?defineCoreMissingHandler(r.missing):null,f=shared.isFunction(r.postTranslation)?r.postTranslation:null,b=o?o.warnHtmlMessage:!shared.isBoolean(r.warnHtmlMessage)||r.warnHtmlMessage,_=!!r.escapeParameter;const h=o?o.modifiers:shared.isPlainObject(r.modifiers)?r.modifiers:{};let E=r.pluralRules||o&&o.pluralRules,I;I=(()=>{t&&coreBase.setFallbackContext(null);const e={version:VERSION,locale:i.value,fallbackLocale:c.value,messages:u.value,modifiers:h,pluralRules:E,missing:null===p?void 0:p,missingWarn:s,fallbackWarn:n,fallbackFormat:l,unresolving:!0,postTranslation:null===f?void 0:f,warnHtmlMessage:b,escapeParameter:_,messageResolver:r.messageResolver,__meta:{framework:"vue"}};e.datetimeFormats=m.value,e.numberFormats=g.value,e.__datetimeFormatters=shared.isPlainObject(I)?I.__datetimeFormatters:void 0,e.__numberFormatters=shared.isPlainObject(I)?I.__numberFormatters:void 0;var a=coreBase.createCoreContext(e);return t&&coreBase.setFallbackContext(a),a})(),coreBase.updateFallbackLocale(I,i.value,c.value);var F=vue.computed({get:()=>i.value,set:e=>{i.value=e,I.locale=i.value}}),L=vue.computed({get:()=>c.value,set:e=>{c.value=e,I.fallbackLocale=c.value,coreBase.updateFallbackLocale(I,i.value,e)}}),O=vue.computed(()=>u.value),k=vue.computed(()=>m.value),y=vue.computed(()=>g.value);const T=(e,a,r,t,s,n)=>{var l;if(i.value,c.value,u.value,m.value,g.value,e=e(I),shared.isNumber(e)&&e===coreBase.NOT_REOSLVED)return[a,l]=a(),o&&d?t(o):s(a);if(n(e))return e;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)};function N(...a){return T(e=>Reflect.apply(coreBase.translate,null,[e,...a]),()=>coreBase.parseTranslateArgs(...a),0,e=>Reflect.apply(e.t,e,[...a]),e=>e,e=>shared.isString(e))}const R={normalize:function(e){return e.map(e=>shared.isString(e)||shared.isNumber(e)||shared.isBoolean(e)?createTextNode(String(e)):e)},interpolate:e=>e,type:"vnode"};function C(e){var a=function(a){let r=null;var t=coreBase.fallbackWithLocaleChain(I,c.value,i.value);for(let e=0;e<t.length;e++){var s=u.value[t[e]]||{},s=I.messageResolver(s,a);if(null!=s){r=s;break}}return r}(e);return null!=a?a:o&&o.tm(e)||{}}function P(e){return u.value[e]||{}}composerID++,o&&shared.inBrowser&&(vue.watch(o.locale,e=>{a&&(i.value=e,I.locale=e,coreBase.updateFallbackLocale(I,i.value,c.value))}),vue.watch(o.fallbackLocale,e=>{a&&(c.value=e,I.fallbackLocale=e,coreBase.updateFallbackLocale(I,i.value,c.value))}));const S={id:composerID,locale:F,fallbackLocale:L,get inheritLocale(){return a},set inheritLocale(e){(a=e)&&o&&(i.value=o.locale.value,c.value=o.fallbackLocale.value,coreBase.updateFallbackLocale(I,i.value,c.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:O,get modifiers(){return h},get pluralRules(){return E||{}},get isGlobal(){return t},get missingWarn(){return s},set missingWarn(e){s=e,I.missingWarn=s},get fallbackWarn(){return n},set fallbackWarn(e){n=e,I.fallbackWarn=n},get fallbackRoot(){return d},set fallbackRoot(e){d=e},get fallbackFormat(){return l},set fallbackFormat(e){l=e,I.fallbackFormat=l},get warnHtmlMessage(){return b},set warnHtmlMessage(e){b=e,I.warnHtmlMessage=e},get escapeParameter(){return _},set escapeParameter(e){_=e,I.escapeParameter=e},t:N,getLocaleMessage:P,setLocaleMessage:function(e,a){u.value[e]=a,I.messages=u.value},mergeLocaleMessage:function(e,a){u.value[e]=u.value[e]||{},deepCopy(a,u.value[e]),I.messages=u.value},getPostTranslationHandler:function(){return shared.isFunction(f)?f:null},setPostTranslationHandler:function(e){f=e,I.postTranslation=e},getMissingHandler:function(){return v},setMissingHandler:function(e){null!==e&&(p=defineCoreMissingHandler(e)),v=e,I.missing=p},[SetPluralRulesSymbol]:function(e){E=e,I.pluralRules=E}};return S.datetimeFormats=k,S.numberFormats=y,S.rt=function(...e){var[e,a,r]=e;if(r&&!shared.isObject(r))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return N(e,a,shared.assign({resolvedMessage:!0},r||{}))},S.te=function(e,a){return a=P(shared.isString(a)?a:i.value),null!==I.messageResolver(a,e)},S.tm=C,S.d=function(...a){return T(e=>Reflect.apply(coreBase.datetime,null,[e,...a]),()=>coreBase.parseDateTimeArgs(...a),0,e=>Reflect.apply(e.d,e,[...a]),()=>coreBase.MISSING_RESOLVE_VALUE,e=>shared.isString(e))},S.n=function(...a){return T(e=>Reflect.apply(coreBase.number,null,[e,...a]),()=>coreBase.parseNumberArgs(...a),0,e=>Reflect.apply(e.n,e,[...a]),()=>coreBase.MISSING_RESOLVE_VALUE,e=>shared.isString(e))},S.getDateTimeFormat=function(e){return m.value[e]||{}},S.setDateTimeFormat=function(e,a){m.value[e]=a,I.datetimeFormats=m.value,coreBase.clearDateTimeFormat(I,e,a)},S.mergeDateTimeFormat=function(e,a){m.value[e]=shared.assign(m.value[e]||{},a),I.datetimeFormats=m.value,coreBase.clearDateTimeFormat(I,e,a)},S.getNumberFormat=function(e){return g.value[e]||{}},S.setNumberFormat=function(e,a){g.value[e]=a,I.numberFormats=g.value,coreBase.clearNumberFormat(I,e,a)},S.mergeNumberFormat=function(e,a){g.value[e]=shared.assign(g.value[e]||{},a),I.numberFormats=g.value,coreBase.clearNumberFormat(I,e,a)},S[InejctWithOption]=r.__injectWithOption,S[TransrateVNodeSymbol]=function(...t){return T(e=>{let a;const r=e;try{r.processor=R,a=Reflect.apply(coreBase.translate,null,[r,...t])}finally{r.processor=null}return a},()=>coreBase.parseTranslateArgs(...t),0,e=>e[TransrateVNodeSymbol](...t),e=>[createTextNode(e)],e=>shared.isArray(e))},S[DatetimePartsSymbol]=function(...a){return T(e=>Reflect.apply(coreBase.datetime,null,[e,...a]),()=>coreBase.parseDateTimeArgs(...a),0,e=>e[DatetimePartsSymbol](...a),()=>[],e=>shared.isString(e)||shared.isArray(e))},S[NumberPartsSymbol]=function(...a){return T(e=>Reflect.apply(coreBase.number,null,[e,...a]),()=>coreBase.parseNumberArgs(...a),0,e=>e[NumberPartsSymbol](...a),()=>[],e=>shared.isString(e)||shared.isArray(e))},S}function convertComposerOptions(e){var a=shared.isString(e.locale)?e.locale:coreBase.DEFAULT_LOCALE,r=shared.isString(e.fallbackLocale)||shared.isArray(e.fallbackLocale)||shared.isPlainObject(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:a,t=shared.isFunction(e.missing)?e.missing:void 0,s=!shared.isBoolean(e.silentTranslationWarn)&&!shared.isRegExp(e.silentTranslationWarn)||!e.silentTranslationWarn,n=!shared.isBoolean(e.silentFallbackWarn)&&!shared.isRegExp(e.silentFallbackWarn)||!e.silentFallbackWarn,l=!shared.isBoolean(e.fallbackRoot)||e.fallbackRoot,o=!!e.formatFallbackMessages,i=shared.isPlainObject(e.modifiers)?e.modifiers:{},c=e.pluralizationRules,u=shared.isFunction(e.postTranslation)?e.postTranslation:void 0,m=!shared.isString(e.warnHtmlInMessage)||"off"!==e.warnHtmlInMessage,g=!!e.escapeParameterHtml,d=!shared.isBoolean(e.sync)||e.sync;let v=e.messages;if(shared.isPlainObject(e.sharedMessages)){const I=e.sharedMessages,F=Object.keys(I);v=F.reduce((e,a)=>{var r=e[a]||(e[a]={});return shared.assign(r,I[a]),e},v||{})}var{__i18n:p,__root:f,__injectWithOption:b}=e,_=e.datetimeFormats,h=e.numberFormats,E=e.flatJson;return{locale:a,fallbackLocale:r,messages:v,flatJson:E,datetimeFormats:_,numberFormats:h,missing:t,missingWarn:s,fallbackWarn:n,fallbackRoot:l,fallbackFormat:o,modifiers:i,pluralRules:c,postTranslation:u,warnHtmlMessage:m,escapeParameter:g,messageResolver:e.messageResolver,inheritLocale:d,__i18n:p,__root:f,__injectWithOption:b}}function createVueI18n(r={},e){{const l=createComposer(convertComposerOptions(r)),t={id:l.id,get locale(){return l.locale.value},set locale(e){l.locale.value=e},get fallbackLocale(){return l.fallbackLocale.value},set fallbackLocale(e){l.fallbackLocale.value=e},get messages(){return l.messages.value},get datetimeFormats(){return l.datetimeFormats.value},get numberFormats(){return l.numberFormats.value},get availableLocales(){return l.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(e){},get missing(){return l.getMissingHandler()},set missing(e){l.setMissingHandler(e)},get silentTranslationWarn(){return shared.isBoolean(l.missingWarn)?!l.missingWarn:l.missingWarn},set silentTranslationWarn(e){l.missingWarn=shared.isBoolean(e)?!e:e},get silentFallbackWarn(){return shared.isBoolean(l.fallbackWarn)?!l.fallbackWarn:l.fallbackWarn},set silentFallbackWarn(e){l.fallbackWarn=shared.isBoolean(e)?!e:e},get modifiers(){return l.modifiers},get formatFallbackMessages(){return l.fallbackFormat},set formatFallbackMessages(e){l.fallbackFormat=e},get postTranslation(){return l.getPostTranslationHandler()},set postTranslation(e){l.setPostTranslationHandler(e)},get sync(){return l.inheritLocale},set sync(e){l.inheritLocale=e},get warnHtmlInMessage(){return l.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(e){l.warnHtmlMessage="off"!==e},get escapeParameterHtml(){return l.escapeParameter},set escapeParameterHtml(e){l.escapeParameter=e},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(e){},get pluralizationRules(){return l.pluralRules||{}},__composer:l,t(...e){var[e,a,r]=e;const t={};let s=null,n=null;if(!shared.isString(e))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return shared.isString(a)?t.locale=a:shared.isArray(a)?s=a:shared.isPlainObject(a)&&(n=a),shared.isArray(r)?s=r:shared.isPlainObject(r)&&(n=r),Reflect.apply(l.t,l,[e,s||n||{},t])},rt(...e){return Reflect.apply(l.rt,l,[...e])},tc(...e){var[e,a,r]=e;const t={plural:1};let s=null,n=null;if(!shared.isString(e))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return shared.isString(a)?t.locale=a:shared.isNumber(a)?t.plural=a:shared.isArray(a)?s=a:shared.isPlainObject(a)&&(n=a),shared.isString(r)?t.locale=r:shared.isArray(r)?s=r:shared.isPlainObject(r)&&(n=r),Reflect.apply(l.t,l,[e,s||n||{},t])},te(e,a){return l.te(e,a)},tm(e){return l.tm(e)},getLocaleMessage(e){return l.getLocaleMessage(e)},setLocaleMessage(e,a){l.setLocaleMessage(e,a)},mergeLocaleMessage(e,a){l.mergeLocaleMessage(e,a)},d(...e){return Reflect.apply(l.d,l,[...e])},getDateTimeFormat(e){return l.getDateTimeFormat(e)},setDateTimeFormat(e,a){l.setDateTimeFormat(e,a)},mergeDateTimeFormat(e,a){l.mergeDateTimeFormat(e,a)},n(...e){return Reflect.apply(l.n,l,[...e])},getNumberFormat(e){return l.getNumberFormat(e)},setNumberFormat(e,a){l.setNumberFormat(e,a)},mergeNumberFormat(e,a){l.mergeNumberFormat(e,a)},getChoiceIndex(e,a){return-1},__onComponentInstanceCreated(e){const a=r["componentInstanceCreatedListener"];a&&a(e,t)}};return t}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>"parent"===e||"global"===e,default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:t},e){if(1!==e.length||"default"!==e[0])return e.reduce((e,a)=>{const r=t[a];return r&&(e[a]=r()),e},{});{const a=t.default?t.default():[];return a.reduce((e,a)=>[...e,...shared.isArray(a.children)?a.children:[a]],[])}}function getFragmentableTag(e){return vue.Fragment}const Translation={name:"i18n-t",props:shared.assign({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>shared.isNumber(e)||!isNaN(e)}},baseFormatProps),setup(s,n){const{slots:l,attrs:o}=n,i=s.i18n||useI18n({useScope:s.scope,__useComponent:!0});return()=>{var e=Object.keys(l).filter(e=>"_"!==e);const a={};s.locale&&(a.locale=s.locale),void 0!==s.plural&&(a.plural=shared.isString(s.plural)?+s.plural:s.plural);var e=getInterpolateArg(n,e),e=i[TransrateVNodeSymbol](s.keypath,e,a),r=shared.assign({},o),t=shared.isString(s.tag)||shared.isObject(s.tag)?s.tag:getFragmentableTag();return vue.h(t,r,e)}}};function isVNode(e){return shared.isArray(e)&&!shared.isString(e[0])}function renderFormatter(l,e,o,i){const{slots:c,attrs:u}=e;return()=>{const e={part:!0};let a={};l.locale&&(e.locale=l.locale),shared.isString(l.format)?e.key=l.format:shared.isObject(l.format)&&(shared.isString(l.format.key)&&(e.key=l.format.key),a=Object.keys(l.format).reduce((e,a)=>o.includes(a)?shared.assign({},e,{[a]:l.format[a]}):e,{}));const s=i(l.value,e,a);let r=[e.key];shared.isArray(s)?r=s.map((e,a)=>{const r=c[e.type],t=r?r({[e.type]:e.value,index:a,parts:s}):[e.value];return isVNode(t)&&(t[0].key=e.type+"-"+a),t}):shared.isString(s)&&(r=[s]);var t=shared.assign({},u),n=shared.isString(l.tag)||shared.isObject(l.tag)?l.tag:getFragmentableTag();return vue.h(n,t,r)}}const NumberFormat={name:"i18n-n",props:shared.assign({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,a){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,a,coreBase.NUMBER_FORMAT_OPTIONS_KEYS,(...e)=>r[NumberPartsSymbol](...e))}},DatetimeFormat={name:"i18n-d",props:shared.assign({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,a){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,a,coreBase.DATETIME_FORMAT_OPTIONS_KEYS,(...e)=>r[DatetimePartsSymbol](...e))}};function getComposer$1(e,a){const r=e;return"composition"===e.mode?r.__getInstance(a)||e.global:(null!=(a=r.__getInstance(a))?a:e.global).__composer}function vTDirective(s){const n=e=>{var{instance:e,value:a}=e;if(!e||!e.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);e=getComposer$1(s,e.$),a=parseValue(a);return[Reflect.apply(e.t,e,[...makeParams(a)]),e]};return{created:(e,a)=>{var[r,t]=n(a);shared.inBrowser&&s.global===t&&(e.__i18nWatcher=vue.watch(t.locale,()=>{a.instance&&a.instance.$forceUpdate()})),e.__composer=t,e.textContent=r},unmounted:e=>{shared.inBrowser&&e.__i18nWatcher&&(e.__i18nWatcher(),e.__i18nWatcher=void 0,delete e.__i18nWatcher),e.__composer&&(e.__composer=void 0,delete e.__composer)},beforeUpdate:(e,{value:a})=>{var r;e.__composer&&(r=e.__composer,a=parseValue(a),e.textContent=Reflect.apply(r.t,r,[...makeParams(a)]))},getSSRProps:e=>{var[e]=n(e);return{textContent:e}}}}function parseValue(e){if(shared.isString(e))return{path:e};if(shared.isPlainObject(e)){if("path"in e)return e;throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path")}throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){var{path:e,locale:a,args:r,choice:t,plural:s}=e;const n={};r=r||{};return shared.isString(a)&&(n.locale=a),shared.isNumber(t)&&(n.plural=t),shared.isNumber(s)&&(n.plural=s),[e,r,n]}function apply(e,a,...r){var r=shared.isPlainObject(r[0])?r[0]:{},t=!!r.useI18nComponentName;shared.isBoolean(r.globalInstall)&&!r.globalInstall||(e.component(t?"i18n":Translation.name,Translation),e.component(NumberFormat.name,NumberFormat),e.component(DatetimeFormat.name,DatetimeFormat)),e.directive("t",vTDirective(a))}function defineMixin(t,s,n){return{beforeCreate(){var e=vue.getCurrentInstance();if(!e)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);var a=this.$options;if(a.i18n){const r=a.i18n;a.__i18n&&(r.__i18n=a.__i18n),r.__root=s,this===this.$root?this.$i18n=mergeToRoot(t,r):(r.__injectWithOption=!0,this.$i18n=createVueI18n(r))}else a.__i18n?this===this.$root?this.$i18n=mergeToRoot(t,a):this.$i18n=createVueI18n({__i18n:a.__i18n,__injectWithOption:!0,__root:s}):this.$i18n=t;a.__i18nGlobal&&adjustI18nResources(s,a,a),t.__onComponentInstanceCreated(this.$i18n),n.__setInstance(e,this.$i18n),this.$t=(...e)=>this.$i18n.t(...e),this.$rt=(...e)=>this.$i18n.rt(...e),this.$tc=(...e)=>this.$i18n.tc(...e),this.$te=(e,a)=>this.$i18n.te(e,a),this.$d=(...e)=>this.$i18n.d(...e),this.$n=(...e)=>this.$i18n.n(...e),this.$tm=e=>this.$i18n.tm(e)},mounted(){},unmounted(){var e=vue.getCurrentInstance();if(!e)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(e),delete this.$i18n}}}function mergeToRoot(a,r){a.locale=r.locale||a.locale,a.fallbackLocale=r.fallbackLocale||a.fallbackLocale,a.missing=r.missing||a.missing,a.silentTranslationWarn=r.silentTranslationWarn||a.silentFallbackWarn,a.silentFallbackWarn=r.silentFallbackWarn||a.silentFallbackWarn,a.formatFallbackMessages=r.formatFallbackMessages||a.formatFallbackMessages,a.postTranslation=r.postTranslation||a.postTranslation,a.warnHtmlInMessage=r.warnHtmlInMessage||a.warnHtmlInMessage,a.escapeParameterHtml=r.escapeParameterHtml||a.escapeParameterHtml,a.sync=r.sync||a.sync,a.__composer[SetPluralRulesSymbol](r.pluralizationRules||a.pluralizationRules);const t=getLocaleMessages(a.locale,{messages:r.messages,__i18n:r.__i18n});return Object.keys(t).forEach(e=>a.mergeLocaleMessage(e,t[e])),r.datetimeFormats&&Object.keys(r.datetimeFormats).forEach(e=>a.mergeDateTimeFormat(e,r.datetimeFormats[e])),r.numberFormats&&Object.keys(r.numberFormats).forEach(e=>a.mergeNumberFormat(e,r.numberFormats[e])),a}const I18nInjectionKey=shared.makeSymbol("global-vue-i18n");function createI18n(e={},a){const t=!shared.isBoolean(e.legacy)||e.legacy,s=!shared.isBoolean(e.globalInjection)||e.globalInjection,r=!t||!!e.allowComposition,n=new Map,[l,o]=createGlobal(e,t),i=shared.makeSymbol("");{const c={get mode(){return t?"legacy":"composition"},get allowComposition(){return r},async install(e,...a){e.__VUE_I18N_SYMBOL__=i,e.provide(e.__VUE_I18N_SYMBOL__,c),!t&&s&&injectGlobalFields(e,c.global),apply(e,c,...a),t&&e.mixin(defineMixin(o,o.__composer,c));const r=e.unmount;e.unmount=()=>{c.dispose(),r()}},get global(){return o},dispose(){l.stop()},__instances:n,__getInstance:function(e){return n.get(e)||null},__setInstance:function(e,a){n.set(e,a)},__deleteInstance:function(e){n.delete(e)}};return c}}function useI18n(a={}){var r=vue.getCurrentInstance();if(null==r)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!r.isCE&&null!=r.appContext.app&&!r.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSLALLED);var t=getI18nInstance(r),s=getGlobalComposer(t),e=getComponentOptions(r),n=getScope(a,e);if("legacy"===t.mode&&!a.__useComponent){if(t.allowComposition)return useI18nForLegacy(r,n,s,a);throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE)}if("global"===n)return adjustI18nResources(s,a,e),s;if("parent"===n){let e=getComposer(t,r,a.__useComponent);return e=null==e?s:e}const l=t;let o=l.__getInstance(r);if(null==o){const i=shared.assign({},a);"__i18n"in e&&(i.__i18n=e.__i18n),s&&(i.__root=s),o=createComposer(i),setupLifeCycle(l,r),l.__setInstance(r,o)}return o}const castToVueI18n=e=>{if(__VUE_I18N_BRIDGE__ in e)return e;throw createI18nError(I18nErrorCodes.NOT_COMPATIBLE_LEGACY_VUE_I18N)};function createGlobal(e,a,r){const t=vue.effectScope();a=a?t.run(()=>createVueI18n(e)):t.run(()=>createComposer(e));if(null==a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[t,a]}function getI18nInstance(e){var a=vue.inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(a)return a;throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR)}function getScope(e,a){return shared.isEmptyObject(e)?"__i18n"in a?"local":"global":e.useScope||"local"}function getGlobalComposer(e){return"composition"===e.mode?e.global:e.global.__composer}function getComposer(e,a,r=!1){let t=null;var s,n=a.root;let l=a.parent;for(;null!=l;){const o=e;if("composition"===e.mode?t=o.__getInstance(l):null!=(s=o.__getInstance(l))&&(t=s.__composer,r&&t&&!t[InejctWithOption]&&(t=null)),null!=t)break;if(n===l)break;l=l.parent}return t}function setupLifeCycle(e,a,r){vue.onMounted(()=>{},a),vue.onUnmounted(()=>{e.__deleteInstance(a)},a)}function useI18nForLegacy(r,t,e,a={}){const s="local"===t,n=vue.shallowRef(null);if(s&&r.proxy&&!r.proxy.$options.i18n&&!r.proxy.$options.__i18n)throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const l=!shared.isBoolean(a.inheritLocale)||a.inheritLocale,o=vue.ref(s&&l?e.locale.value:shared.isString(a.locale)?a.locale:coreBase.DEFAULT_LOCALE),i=vue.ref(s&&l?e.fallbackLocale.value:shared.isString(a.fallbackLocale)||shared.isArray(a.fallbackLocale)||shared.isPlainObject(a.fallbackLocale)||!1===a.fallbackLocale?a.fallbackLocale:o.value),c=vue.ref(getLocaleMessages(o.value,a)),u=vue.ref(shared.isPlainObject(a.datetimeFormats)?a.datetimeFormats:{[o.value]:{}}),m=vue.ref(shared.isPlainObject(a.numberFormats)?a.numberFormats:{[o.value]:{}}),g=s?e.missingWarn:!shared.isBoolean(a.missingWarn)&&!shared.isRegExp(a.missingWarn)||a.missingWarn,d=s?e.fallbackWarn:!shared.isBoolean(a.fallbackWarn)&&!shared.isRegExp(a.fallbackWarn)||a.fallbackWarn,v=s?e.fallbackRoot:!shared.isBoolean(a.fallbackRoot)||a.fallbackRoot,p=!!a.fallbackFormat,f=shared.isFunction(a.missing)?a.missing:null,b=shared.isFunction(a.postTranslation)?a.postTranslation:null,_=s?e.warnHtmlMessage:!shared.isBoolean(a.warnHtmlMessage)||a.warnHtmlMessage,h=!!a.escapeParameter,E=s?e.modifiers:shared.isPlainObject(a.modifiers)?a.modifiers:{},I=a.pluralRules||s&&e.pluralRules;var a=vue.computed({get:()=>(n.value?n.value.locale:o).value,set:e=>{n.value&&(n.value.locale.value=e),o.value=e}}),e=vue.computed({get:()=>(n.value?n.value.fallbackLocale:i).value,set:e=>{n.value&&(n.value.fallbackLocale.value=e),i.value=e}}),F=vue.computed(()=>(n.value?n.value.messages:c).value),L=vue.computed(()=>u.value),O=vue.computed(()=>m.value);function k(e){return o.value,i.value,c.value,u.value,m.value,e()}a={get id(){return n.value?n.value.id:-1},locale:a,fallbackLocale:e,messages:F,datetimeFormats:L,numberFormats:O,get inheritLocale(){return n.value?n.value.inheritLocale:l},set inheritLocale(e){n.value&&(n.value.inheritLocale=e)},get availableLocales(){return n.value?n.value.availableLocales:Object.keys(c.value)},get modifiers(){return n.value?n.value.modifiers:E},get pluralRules(){return n.value?n.value.pluralRules:I},get isGlobal(){return!!n.value&&n.value.isGlobal},get missingWarn(){return n.value?n.value.missingWarn:g},set missingWarn(e){n.value&&(n.value.missingWarn=e)},get fallbackWarn(){return n.value?n.value.fallbackWarn:d},set fallbackWarn(e){n.value&&(n.value.missingWarn=e)},get fallbackRoot(){return n.value?n.value.fallbackRoot:v},set fallbackRoot(e){n.value&&(n.value.fallbackRoot=e)},get fallbackFormat(){return n.value?n.value.fallbackFormat:p},set fallbackFormat(e){n.value&&(n.value.fallbackFormat=e)},get warnHtmlMessage(){return n.value?n.value.warnHtmlMessage:_},set warnHtmlMessage(e){n.value&&(n.value.warnHtmlMessage=e)},get escapeParameter(){return n.value?n.value.escapeParameter:h},set escapeParameter(e){n.value&&(n.value.escapeParameter=e)},t:function(...e){return n.value?k(()=>Reflect.apply(n.value.t,null,[...e])):k(()=>"")},getPostTranslationHandler:function(){return n.value?n.value.getPostTranslationHandler():b},setPostTranslationHandler:function(e){n.value&&n.value.setPostTranslationHandler(e)},getMissingHandler:function(){return n.value?n.value.getMissingHandler():f},setMissingHandler:function(e){n.value&&n.value.setMissingHandler(e)},rt:function(...e){return n.value?Reflect.apply(n.value.rt,null,[...e]):""},d:function(...e){return n.value?k(()=>Reflect.apply(n.value.d,null,[...e])):k(()=>"")},n:function(...e){return n.value?k(()=>Reflect.apply(n.value.n,null,[...e])):k(()=>"")},tm:function(e){return n.value?n.value.tm(e):{}},te:function(e,a){return!!n.value&&n.value.te(e,a)},getLocaleMessage:function(e){return n.value?n.value.getLocaleMessage(e):{}},setLocaleMessage:function(e,a){n.value&&(n.value.setLocaleMessage(e,a),c.value[e]=a)},mergeLocaleMessage:function(e,a){n.value&&n.value.mergeLocaleMessage(e,a)},getDateTimeFormat:function(e){return n.value?n.value.getDateTimeFormat(e):{}},setDateTimeFormat:function(e,a){n.value&&(n.value.setDateTimeFormat(e,a),u.value[e]=a)},mergeDateTimeFormat:function(e,a){n.value&&n.value.mergeDateTimeFormat(e,a)},getNumberFormat:function(e){return n.value?n.value.getNumberFormat(e):{}},setNumberFormat:function(e,a){n.value&&(n.value.setNumberFormat(e,a),m.value[e]=a)},mergeNumberFormat:function(e,a){n.value&&n.value.mergeNumberFormat(e,a)}};return vue.onBeforeMount(()=>{if(null==r.proxy||null==r.proxy.$i18n)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);var a,e=n.value=r.proxy.$i18n.__composer;"global"===t?(o.value=e.locale.value,i.value=e.fallbackLocale.value,c.value=e.messages.value,u.value=e.datetimeFormats.value,m.value=e.numberFormats.value):s&&((a=e).locale.value=o.value,a.fallbackLocale.value=i.value,Object.keys(c.value).forEach(e=>{a.mergeLocaleMessage(e,c.value[e])}),Object.keys(u.value).forEach(e=>{a.mergeDateTimeFormat(e,u.value[e])}),Object.keys(m.value).forEach(e=>{a.mergeNumberFormat(e,m.value[e])}),a.escapeParameter=h,a.fallbackFormat=p,a.fallbackRoot=v,a.fallbackWarn=d,a.missingWarn=g,a.warnHtmlMessage=_)}),a}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm"];function injectGlobalFields(r,t){const s=Object.create(null);globalExportProps.forEach(e=>{const a=Object.getOwnPropertyDescriptor(t,e);if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);var r=vue.isRef(a.value)?{get(){return a.value.value},set(e){a.value.value=e}}:{get(){return a.get&&a.get()}};Object.defineProperty(s,e,r)}),r.config.globalProperties.$i18n=s,globalExportMethods.forEach(e=>{var a=Object.getOwnPropertyDescriptor(t,e);if(!a||!a.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(r.config.globalProperties,"$"+e,a)})}coreBase.registerMessageCompiler(coreBase.compileToFunction),coreBase.registerMessageResolver(coreBase.resolveValue),coreBase.registerLocaleFallbacker(coreBase.fallbackWithLocaleChain),exports.DatetimeFormat=DatetimeFormat,exports.I18nInjectionKey=I18nInjectionKey,exports.NumberFormat=NumberFormat,exports.Translation=Translation,exports.VERSION=VERSION,exports.castToVueI18n=castToVueI18n,exports.createI18n=createI18n,exports.useI18n=useI18n,exports.vTDirective=vTDirective;